@using WebMatrix.Data

@{
    ViewBag.Title = "Home Page";
    var db = Database.Open("Database1");
    var selectQueryString = "SELECT * FROM Apps ORDER BY rating DESC";
}

<div class="jumbotron">
    <h1><img src="~/Images/icon.jpg" alt="icon" height="60" width="60" /> S.A.F.E. (Searchable Applications For Everyone) Presents</h1>
    <p class="lead">This weeks top three apps are:</p>
    @*%--<p><a href="http://www.asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>*@
</div>


    
<div class="row" style="margin:4px">
    @foreach (var row in db.Query(selectQueryString))
    {
        <div class="col-md-4">
            <h2><img src="~/Images/@row.fileName" alt="@row.appName  + @row.id" height="42" width="42" /> @row.appName</h2>
            <p>
                @row.appDescription
            </p>
            <p>
                <strong>Rating: </strong>@row.rating
    @{
                    for (int i = 0; i < Math.Floor(row.rating); i++)
                    {
                        <img src="~/Images/fullStar.jpg" alt="fullStar" height="20" width="20" />
                    }
                    int num = 0;
                    if (row.rating % 1 > 0)
                    {
                        num = 1;
                        <img src="~/Images/halfStar.jpg" alt="halfStar" height="22" width="20" />

                    }
                    else
                    {
                        num = 0;
                    }

                    for (int i = 0; i < 5 - num - row.rating; i++)
                    {
                        <img src="~/Images/emptyStar.jpg" alt="emptyStar" height="20" width="20" />
                    }
                }
            </p>
            <p>
                <a class="btn btn-primary" href="@row.url" target="_blank">Learn more &raquo;</a>
            </p>
        </div>
    }
</div>

